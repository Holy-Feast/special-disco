(function(){"use strict";var t={1485:function(t,e,a){var s=a(9242),o=a(3396),i=a.p+"img/CloudS.b7698793.svg";const n={id:"nav"},r=(0,o._)("img",{src:i,width:"150",height:"150",alt:"logo",srcset:""},null,-1),c=(0,o._)("img",{src:"https://cdn-icons-png.flaticon.com/512/263/263417.png",width:"30",height:"30",alt:"logo",srcset:""},null,-1);function l(t,e,a,s,i,l){const d=(0,o.up)("router-link"),u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o.Wm)(d,{class:"w-30",to:"/"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(d,{class:"marg-left nav__favours",to:"/favs"},{default:(0,o.w5)((()=>[c])),_:1})]),(0,o.Wm)(u)],64)}var d={name:"App"},u=a(89);const h=(0,u.Z)(d,[["render",l]]);var f=h,p=a(2483),m=a(7139);const v={class:"date"};function g(t,e,a,s,i,n){const r=(0,o.up)("SearchComponent"),c=(0,o.up)("CityCard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,{onOnSearch:n.updateCity,class:"w-30"},null,8,["onOnSearch"]),(0,o._)("h1",null,[(0,o.Uk)(" Weather "),(0,o._)("div",v,(0,m.zw)(n.today),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.locations,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"city-list"},[(0,o.Wm)(c,{onDeleteCity:n.deleteCity,onDelFromFav:n.delFromFav,onAddToFav:n.addToFav,favourites:!1,location:t},null,8,["onDeleteCity","onDelFromFav","onAddToFav","location"])])))),128))],64)}a(7658);const y=t=>((0,o.dD)("data-v-102a85ba"),t=t(),(0,o.Cn)(),t),w={class:"search"},_=y((()=>(0,o._)("button",{type:"submit",class:"searchButton"},[(0,o._)("svg",{class:"svg-icon search-icon","aria-labelledby":"title desc",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19.9 19.7"},[(0,o._)("title",{id:"title"},"Search Icon"),(0,o._)("desc",{id:"desc"},"A magnifying glass icon."),(0,o._)("g",{class:"search-path",fill:"none",stroke:"#fff"},[(0,o._)("path",{"stroke-linecap":"square",d:"M18.5 18.3l-5.4-5.4"}),(0,o._)("circle",{cx:"8",cy:"8",r:"7"})])])],-1))),C={key:0,class:"search-list"},b=["onClick"];function F(t,e,a,i,n,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",w,[(0,o.wy)((0,o._)("input",{type:"text",id:"search","onUpdate:modelValue":e[0]||(e[0]=t=>i.searchTerm=t),placeholder:"Type here...",class:"searchTerm"},null,512),[[s.nr,i.searchTerm]]),_]),i.searchCity.length?((0,o.wg)(),(0,o.iD)("ul",C,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.searchCity,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.name,onClick:e=>i.selectCity(t),class:"search-item"},(0,m.zw)(`${t.name}, ${t.country}`),9,b)))),128))])):(0,o.kq)("",!0)],64)}var D=a(3944),L=a(4870),k={name:"SearchComponent",emits:["onSearch"],setup(t,{emit:e}){let a=(0,L.iH)("");const s=(0,o.Fl)((()=>{if(""===a.value)return[];let t=0;return D.filter((e=>{if(e.name.toLowerCase().includes(a.value.toLowerCase())&&t<10)return t++,e}))})),i=t=>{n.value=t.name,a.value="",e("onSearch",`${t.name}, ${t.country}`)};let n=(0,L.iH)("");return{cities:D,searchTerm:a,searchCity:s,selectCity:i,selectedCity:n}}};const S=(0,u.Z)(k,[["render",F],["__scopeId","data-v-102a85ba"]]);var $=S;const T=t=>((0,o.dD)("data-v-94baf59e"),t=t(),(0,o.Cn)(),t),O={class:"content_container"},I={class:"content_wrapper"},x={class:"weather_card"},W=T((()=>(0,o._)("div",{class:"weather_card_state"},null,-1))),H=[W],j={class:"weather_card_infos"},P={style:{display:"flex","justify-content":"space-around"}},z={class:"weather_card_infos_title"},Z={style:{display:"flex",cursor:"pointer"}},q={class:"weather_card_infos_temp"},A={class:"bottom"},J=T((()=>(0,o._)("hr",null,null,-1))),N={class:"weather_card_infos_bottom"};function Y(t,e,a,i,n,r){const c=(0,o.up)("ChartComponent");return(0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("div",I,[(0,o._)("div",null,[(0,o._)("div",x,[(0,o._)("div",{class:"weather_card_img",style:(0,m.j5)({backgroundImage:r.weatherImg})},H,4),(0,o._)("div",j,[(0,o._)("div",P,[(0,o._)("div",z,(0,m.zw)(`${n.infos.city},${n.infos.country}`),1),(0,o._)("div",Z,[(0,o.wy)((0,o._)("img",{onClick:e[0]||(e[0]=t=>r.delFromFav(`${n.infos.city}, ${n.infos.country}`)),src:"https://cdn-icons-png.flaticon.com/512/263/263417.png",width:"30",height:"30",alt:"logo",srcset:""},null,512),[[s.F8,n.favour]]),(0,o.wy)((0,o._)("img",{onClick:e[1]||(e[1]=t=>r.addToFav(`${n.infos.city}, ${n.infos.country}`)),src:"https://cdn-icons-png.flaticon.com/512/73/73814.png",width:"30",height:"30",alt:"logo",srcset:""},null,512),[[s.F8,!n.favour]]),(0,o._)("button",{class:"remove-fromlist",style:{"margin-left":"10px",cursor:"pointer"},onClick:e[2]||(e[2]=t=>r.deleteFromList(`${n.infos.city}, ${n.infos.country}`))},"x")])]),(0,o._)("div",q,(0,m.zw)(r.celsius)+"°C / "+(0,m.zw)(r.fahrenheit)+"°F ",1),(0,o._)("div",A,[J,(0,o._)("div",N," humidity: "+(0,m.zw)(n.infos.humidity)+" - pressure: "+(0,m.zw)(n.infos.pressure)+"Pa ",1)])])])])]),(0,o.Wm)(c,{forecastList:n.forecastList},null,8,["forecastList"])])}var M=a(70);const E={class:"chart_card"},G=["disabled"],K={class:"chart-container"},U={id:"chart",ref:"canvas"};function B(t,e,a,s,i,n){return(0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("button",{class:"chart_btn",ref:"switcher",disabled:i.isDisabled,onClick:e[0]||(e[0]=(...t)=>n.switchGraph&&n.switchGraph(...t))},"by "+(0,m.zw)(i.switcher),9,G),(0,o._)("div",K,[(0,o._)("canvas",U,null,512)])])}var R=a(741),V={name:"ChartComponent",props:["forecastList"],data(){return{switcher:"days",isDisabled:!1,chart:null}},watch:{forecastList:function(){this.getHours(this.forecastList)}},methods:{buildChart(t,e){this.chart&&this.chart.destroy(),R.kL.register(...R.zX),this.chart=new R.kL(this.$refs.canvas,{type:"line",data:{labels:t,datasets:[{data:e,label:"Africa",borderColor:"#3e95cd",fill:!1}]},options:{title:{display:!0,text:"World population per region (in millions)"}}})},getHours(t){let e=`${(new Date).getDate()+1}.${(new Date).getMonth()+1}`,a=[],s=[];t.forEach((t=>{t.days==e&&(a.push(t.time),s.push(t.temp))})),this.buildChart(a,s)},getDays(t){let e=[],a=[],s=0,o=0;t.forEach(((i,n)=>{s+=i.temp,o++,t[n+1]&&t[n].days!=t[n+1].days&&(e.push(i.days),a.push(s/o),s=0,o=0)})),this.buildChart(e,a)},switchGraph(){this.isDisabled=!0,setTimeout((()=>this.isDisabled=!1),1100),"days"==this.switcher?this.getDays(this.forecastList):this.getHours(this.forecastList),this.switcher="days"==this.switcher?"hours":"days"}}};const X=(0,u.Z)(V,[["render",B],["__scopeId","data-v-1fd3b224"]]);var Q=X,tt={name:"CityCard",components:{ChartComponent:Q},props:["location","favourites"],emits:["deleteCity","addToFav","delFromFav"],data(){return{favour:this.favourites,forecastList:[],infos:{city:"",country:"",temp:null,humidity:null,state:null}}},watch:{location:async function(t){await this.fetchData(t)}},computed:{celsius(){return Math.round(this.infos.temp)},fahrenheit(){return Math.round(9*this.infos.temp/5)},weatherIcon(){switch(this.infos.state){case"Sunny":return"wb_sunny";case"Clear":return"wb_sunny";case"Rain":return"umbrella";case"Fog":return"stacked_line_chart";case"Clouds":return"filter_drama";default:return"error"}},weatherImg(){let t=null;switch(this.infos.state){case"Clear":t="https://media-cdn.tripadvisor.com/media/photo-s/04/b5/0f/ff/alinn-sarigerme-boutique.jpg";break;case"Sunny":t="https://media-cdn.tripadvisor.com/media/photo-s/04/b5/0f/ff/alinn-sarigerme-boutique.jpg";break;case"Rain":t="umbrella";break;case"Fog":t="stacked_line_chart";break;case"Clouds":t="https://i.pinimg.com/736x/44/67/33/4467338524df8802784fbaef4d5c0bb5.jpg";break;default:console.error("cannot find image: state is undefined")}return"url("+t+")"}},async created(){let t=JSON.parse(localStorage.getItem("favlocations"));-1!=t.findIndex((t=>t.toLowerCase().replace(/\W/g,"")==this.location.toLowerCase().replace(/\W/g,"")))&&(this.favour=!0),await this.fetchData(this.location)},methods:{deleteFromList(t){this.$emit("deleteCity",t)},addToFav(t){this.favour=!0,this.$emit("addToFav",t)},delFromFav(t){this.favour=!1,this.$emit("delFromFav",t)},async fetchData(t){const e=`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=f909a48dbf3e04882f4bd18b885d816a&units=metric`,a=`https://api.openweathermap.org/data/2.5/forecast?q=${t}&appid=f909a48dbf3e04882f4bd18b885d816a&units=metric`,s=await M.ZP.get(e).then((t=>this.info=t.data)),o=await M.ZP.get(a).then((t=>this.infoForecast=t.data));this.forecastList=o.list,this.forecastList=this.forecastList.map((t=>{let e=new Date(1e3*t.dt);return{days:`${e.getDate()}.${e.getMonth()+1}`,time:e.getHours(),temp:t.main.temp}})),this.infos.city=s.name,this.infos.country=s.sys.country,this.infos.temp=s.main.temp,this.infos.humidity=s.main.humidity,this.infos.pressure=s.main.pressure,this.infos.state=s.weather[0].main}}};const et=(0,u.Z)(tt,[["render",Y],["__scopeId","data-v-94baf59e"]]);var at=et,st={name:"HomePage",components:{SearchComponent:$,CityCard:at},data(){return{locations:[],favLocations:[]}},async created(){await this.fetchData()},computed:{today(){const t={weekday:"long",year:"numeric",month:"long",day:"numeric"};return(new Date).toLocaleDateString("en-US",t)}},methods:{updateCity(t){this.locations.length<5?this.locations.push(t):alert("Too much, delete something")},addToFav(t){JSON.parse(localStorage.getItem("favlocations")).length<5?(this.favLocations.push(t),localStorage.setItem("favlocations",JSON.stringify(this.favLocations))):alert("Too much, delete something")},delFromFav(t){this.favLocations.splice(this.favLocations.findIndex((e=>e.toLowerCase().replace(/\W/g,"")==t.toLowerCase().replace(/\W/g,""))),1),localStorage.setItem("favlocations",JSON.stringify(this.favLocations))},deleteCity(t){this.locations.splice(this.locations.findIndex((e=>e.toLowerCase().replace(/\W/g,"")==t.toLowerCase().replace(/\W/g,""))),1)},async fetchData(){await fetch("https://api.ipregistry.co/?key=3vhow340sa37p24c").then((function(t){return t.json()})).then((t=>{this.locations.push(`${t.location.city}, ${t.location.country.code}`)}))}}};const ot=(0,u.Z)(st,[["render",g],["__scopeId","data-v-41023aa4"]]);var it=ot;const nt=(0,o._)("h1",null,"Favourites",-1);function rt(t,e,a,s,i,n){const r=(0,o.up)("CityCard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[nt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.favLocations,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"city-list"},[e?((0,o.wg)(),(0,o.j4)(r,{key:0,onDeleteCity:t.deleteCity,onDelFromFav:n.delFromFav,onAddToFav:n.addToFav,favourites:!0,location:e},null,8,["onDeleteCity","onDelFromFav","onAddToFav","location"])):(0,o.kq)("",!0)])))),128))],64)}var ct={name:"FavouritesPage",data(){return{favLocations:[]}},components:{CityCard:at},created(){this.favLocations=JSON.parse(localStorage.getItem("favlocations"))},methods:{addToFav(t){this.favLocations.push(t),localStorage.setItem("favlocations",JSON.stringify(this.favLocations))},delFromFav(t){this.favLocations.splice(this.favLocations.findIndex((e=>e.toLowerCase().replace(/\W/g,"")==t.toLowerCase().replace(/\W/g,""))),1),localStorage.setItem("favlocations",JSON.stringify(this.favLocations))}}};const lt=(0,u.Z)(ct,[["render",rt]]);var dt=lt;const ut="undefined"===typeof window,ht=ut?(0,p.PP)():(0,p.PO)(),ft=[{path:"/",name:"HomePage",component:it},{path:"/favs",name:"FavouritesPage",component:dt}],pt=(0,p.p7)({history:ht,routes:ft});var mt=pt;const vt=(0,s.ri)(f);vt.use(mt),vt.mount("#app")}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,o,i){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],i=t[d][2];for(var r=!0,c=0;c<s.length;c++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(r=!1,i<n&&(n=i));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="special-disco/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,n=s[0],r=s[1],c=s[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(c)var d=c(a)}for(e&&e(s);l<n.length;l++)i=n[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunktestweather"]=self["webpackChunktestweather"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(1485)}));s=a.O(s)})();
//# sourceMappingURL=app.240a3d7e.js.map